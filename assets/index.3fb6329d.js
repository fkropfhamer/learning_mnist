import{D as u,l as f,t as y}from"./vendor.d87eb686.js";const x=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}};x();const p=r=>{const t=r.canvas.height,i=r.canvas.width,o=u.getGreyScalePixelArray(r),e=P(o,i);let n=1/0,c=1/0,d=-1/0,l=-1/0;for(let a=0;a<t;a++)for(let s=0;s<t;s++)e[a][s]>0&&(c>s&&(c=s),n>a&&(n=a),l<s&&(l=s),d<a&&(d=a));return{minPoint:{x:c,y:n},maxPoint:{x:l,y:d}}},h=r=>{let t=0,i=0,o=0;r.forEach((c,d)=>{c.forEach((l,a)=>{const s=l/255;i+=a*s,o+=d*s,t+=s})});const e=i/t,n=o/t;return{x:e,y:n}},g=r=>{const t=p(r),i=t.maxPoint.y-t.minPoint.y,o=t.maxPoint.x-t.minPoint.x,e=i>o?i:o,n=document.createElement("canvas");n.width=20,n.height=20;const c=n.getContext("2d");c.drawImage(r.canvas,t.minPoint.x,t.minPoint.y,e,e,0,0,20,20);const d=u.getPixelMatrix(c),l=h(d),a=document.createElement("canvas");a.width=28,a.height=28;const s=a.getContext("2d"),m=28/2;return s.drawImage(n,m-l.x,m-l.y),s},P=(r,t)=>{const i=[];let o=0;for(;o<r.length;)i.push(r.slice(o,t+o)),o+=t;return i},w=async(r,t)=>{const o=await r.predict(t).data();return o.indexOf(Math.max(...o))},b=async()=>{const r=document.querySelector("#root"),t=document.querySelector("#clear-button"),i=document.querySelector("#predict-button"),o=document.querySelector("#output"),e=new u(r,256,256);t.onclick=()=>{o.innerHTML="",e.reset()};const n=await f("/model/tfjs_model/model.json");i.onclick=async()=>{o.innerHTML="Predicting...";const c=g(e.ctx),d=u.getGreyScalePixelArray(c),l=await w(n,y(Array.from(d),[1,28,28,1]));console.log(l),o.innerHTML=`Prediction: ${l}`}};b();
